# Go并发编程实战

## 多线程与多进程

在多个线程之间交换数据是非常简单和自然的事情，而在多个进程之间只能通过一些额外的手段（比如管道、消息队列、信号量和共享内存区）传递数据。显然，使用这些额外手段会增加成本。不过，线程间交换数据虽然简单但却由于可能发生竞态条件而不得不适用一些同步工具（比如互斥量和条件变量）加以保护。这些与业务逻辑无关的代码会增加程序的复杂度。并且， 使用这些同步工具本身也会可能造成程序性能大幅下降和死锁。

总体来说，多线程作为更加现代的并发编程方式在系统资源的利用和程序性能的提高方面都更具优势。但是，在某些情况下，比如对信号的处理、同时处理多套不同的程序以及包含多个需要超大内存支持的任务等，传统的多进程编程方式可能会更加先进和充分。

## Go并发机制

### 原理探究

GO语言打出的标语是：不要用共享内存的方式来通信。作为替代，应该以通信作为手段来共享内存。GO不推荐用共享内存的方式传递数据，而推荐使用channel。

### 实战演练

Go原生的数据类型中只有通道是并发安全的，数组和切片都不是并发安全的。

## 同步

### 条件变量

与互斥锁和读写锁不同，简单的声明无法创建出一个可用的条件变量，需要用到`sync.NewCond`函数。
如：`func NewCond(l Locker) *Cond`，条件变量总要与互斥量组合使用。